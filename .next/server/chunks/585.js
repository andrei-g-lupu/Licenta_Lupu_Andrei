exports.id=585,exports.ids=[585],exports.modules={6686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return m}});let r=n(2147),o=n(7795),a=o._(n(9885)),l=r._(n(8908)),i=r._(n(6420)),s=n(5161),c=n(1412),u=n(7927);n(8601);let d=n(713),f=r._(n(8320)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function handleLoading(e,t,n,r,o,a){let l=null==e?void 0:e.src;if(!e||e["data-loaded-src"]===l)return;e["data-loaded-src"]=l;let i="decode"in e?e.decode():Promise.resolve();i.catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&o(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,o=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>o,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{o=!0,t.stopPropagation()}})}(null==r?void 0:r.current)&&r.current(e)}})}function getDynamicProps(e){let[t,n]=a.version.split("."),r=parseInt(t,10),o=parseInt(n,10);return r>18||18===r&&o>=3?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let g=(0,a.forwardRef)((e,t)=>{let{src:n,srcSet:r,sizes:o,height:l,width:i,decoding:s,className:c,style:u,fetchPriority:d,placeholder:f,loading:p,unoptimized:g,fill:m,onLoadRef:h,onLoadingCompleteRef:_,setBlurComplete:y,setShowAltText:b,onLoad:E,onError:v,...I}=e;return a.default.createElement("img",{...I,...getDynamicProps(d),loading:p,width:i,height:l,decoding:s,"data-nimg":m?"fill":"1",className:c,style:u,sizes:o,srcSet:r,src:n,ref:(0,a.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(v&&(e.src=e.src),e.complete&&handleLoading(e,f,h,_,y,g))},[n,f,h,_,y,v,g,t]),onLoad:e=>{let t=e.currentTarget;handleLoading(t,f,h,_,y,g)},onError:e=>{b(!0),"empty"!==f&&y(!0),v&&v(e)}})});function ImagePreload(e){let{isAppRouter:t,imgAttributes:n}=e,r={as:"image",imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:n.crossOrigin,referrerPolicy:n.referrerPolicy,...getDynamicProps(n.fetchPriority)};return t&&l.default.preload?(l.default.preload(n.src,r),null):a.default.createElement(i.default,null,a.default.createElement("link",{key:"__nimg-"+n.src+n.srcSet+n.sizes,rel:"preload",href:n.srcSet?void 0:n.src,...r}))}let m=(0,a.forwardRef)((e,t)=>{let n=(0,a.useContext)(d.RouterContext),r=(0,a.useContext)(u.ImageConfigContext),o=(0,a.useMemo)(()=>{let e=p||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),n=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:n}},[r]),{onLoad:l,onLoadingComplete:i}=e,m=(0,a.useRef)(l);(0,a.useEffect)(()=>{m.current=l},[l]);let h=(0,a.useRef)(i);(0,a.useEffect)(()=>{h.current=i},[i]);let[_,y]=(0,a.useState)(!1),[b,E]=(0,a.useState)(!1),{props:v,meta:I}=(0,s.getImgProps)(e,{defaultLoader:f.default,imgConf:o,blurComplete:_,showAltText:b});return a.default.createElement(a.default.Fragment,null,a.default.createElement(g,{...v,unoptimized:I.unoptimized,placeholder:I.placeholder,fill:I.fill,onLoadRef:m,onLoadingCompleteRef:h,setBlurComplete:y,setShowAltText:E,ref:t}),I.priority?a.default.createElement(ImagePreload,{isAppRouter:!n,imgAttributes:v}):null)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1281:(e,t)=>{"use strict";function isInAmpMode(e){let{ampFirst:t=!1,hybrid:n=!1,hasQuery:r=!1}=void 0===e?{}:e;return t||n&&r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return isInAmpMode}})},5161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return getImgProps}}),n(8601);let r=n(2490),o=n(1412);function isStaticRequire(e){return void 0!==e.default}function getInt(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function getImgProps(e,t){var n;let a,l,i,{src:s,sizes:c,unoptimized:u=!1,priority:d=!1,loading:f,className:p,quality:g,width:m,height:h,fill:_=!1,style:y,onLoad:b,onLoadingComplete:E,placeholder:v="empty",blurDataURL:I,fetchPriority:S,layout:w,objectFit:C,objectPosition:A,lazyBoundary:R,lazyRoot:T,...x}=e,{imgConf:O,showAltText:k,blurComplete:N,defaultLoader:j}=t,D=O||o.imageConfigDefault;if("allSizes"in D)a=D;else{let e=[...D.deviceSizes,...D.imageSizes].sort((e,t)=>e-t),t=D.deviceSizes.sort((e,t)=>e-t);a={...D,allSizes:e,deviceSizes:t}}let F=x.loader||j;delete x.loader,delete x.srcSet;let P="__next_img_default"in F;if(P){if("custom"===a.loader)throw Error('Image with src "'+s+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=F;F=t=>{let{config:n,...r}=t;return e(r)}}if(w){"fill"===w&&(_=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[w];e&&(y={...y,...e});let t={responsive:"100vw",fill:"100vw"}[w];t&&!c&&(c=t)}let M="",U=getInt(m),L=getInt(h);if("object"==typeof(n=s)&&(isStaticRequire(n)||void 0!==n.src)){let e=isStaticRequire(s)?s.default:s;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(l=e.blurWidth,i=e.blurHeight,I=I||e.blurDataURL,M=e.src,!_){if(U||L){if(U&&!L){let t=U/e.width;L=Math.round(e.height*t)}else if(!U&&L){let t=L/e.height;U=Math.round(e.width*t)}}else U=e.width,L=e.height}}let V=!d&&("lazy"===f||void 0===f);(!(s="string"==typeof s?s:M)||s.startsWith("data:")||s.startsWith("blob:"))&&(u=!0,V=!1),a.unoptimized&&(u=!0),P&&s.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(u=!0),d&&(S="high");let B=getInt(g),z=Object.assign(_?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:A}:{},k?{}:{color:"transparent"},y),J=N||"empty"===v?null:"blur"===v?'url("data:image/svg+xml;charset=utf-8,'+(0,r.getImageBlurSvg)({widthInt:U,heightInt:L,blurWidth:l,blurHeight:i,blurDataURL:I||"",objectFit:z.objectFit})+'")':'url("'+v+'")',W=J?{backgroundSize:z.objectFit||"cover",backgroundPosition:z.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:J}:{},q=function(e){let{config:t,src:n,unoptimized:r,width:o,quality:a,sizes:l,loader:i}=e;if(r)return{src:n,srcSet:void 0,sizes:void 0};let{widths:s,kind:c}=function(e,t,n){let{deviceSizes:r,allSizes:o}=e;if(n){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let r;r=e.exec(n);r)t.push(parseInt(r[2]));if(t.length){let e=.01*Math.min(...t);return{widths:o.filter(t=>t>=r[0]*e),kind:"w"}}return{widths:o,kind:"w"}}if("number"!=typeof t)return{widths:r,kind:"w"};let a=[...new Set([t,2*t].map(e=>o.find(t=>t>=e)||o[o.length-1]))];return{widths:a,kind:"x"}}(t,o,l),u=s.length-1;return{sizes:l||"w"!==c?l:"100vw",srcSet:s.map((e,r)=>i({config:t,src:n,quality:a,width:e})+" "+("w"===c?e:r+1)+c).join(", "),src:i({config:t,src:n,quality:a,width:s[u]})}}({config:a,src:s,unoptimized:u,width:U,quality:B,sizes:c,loader:F}),Y={...x,loading:V?"lazy":f,fetchPriority:S,width:U,height:L,decoding:"async",className:p,style:{...z,...W},sizes:q.sizes,srcSet:q.srcSet,src:q.src},H={unoptimized:u,priority:d,placeholder:v,fill:_};return{props:Y,meta:H}}},6420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{defaultHead:function(){return defaultHead},default:function(){return _default}});let r=n(2147),o=n(7795),a=o._(n(9885)),l=r._(n(4005)),i=n(2999),s=n(5851),c=n(1281);function defaultHead(e){void 0===e&&(e=!1);let t=[a.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(a.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function onlyReactElement(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}n(8601);let u=["name","httpEquiv","charSet","itemProp"];function reduceComponents(e,t){let{inAmpMode:n}=t;return e.reduce(onlyReactElement,[]).reverse().concat(defaultHead(n).reverse()).filter(function(){let e=new Set,t=new Set,n=new Set,r={};return o=>{let a=!0,l=!1;if(o.key&&"number"!=typeof o.key&&o.key.indexOf("$")>0){l=!0;let t=o.key.slice(o.key.indexOf("$")+1);e.has(t)?a=!1:e.add(t)}switch(o.type){case"title":case"base":t.has(o.type)?a=!1:t.add(o.type);break;case"meta":for(let e=0,t=u.length;e<t;e++){let t=u[e];if(o.props.hasOwnProperty(t)){if("charSet"===t)n.has(t)?a=!1:n.add(t);else{let e=o.props[t],n=r[t]||new Set;("name"!==t||!l)&&n.has(e)?a=!1:(n.add(e),r[t]=n)}}}}return a}}()).reverse().map((e,t)=>{let r=e.key||t;if(!n&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,a.default.cloneElement(e,t)}return a.default.cloneElement(e,{key:r})})}let _default=function(e){let{children:t}=e,n=(0,a.useContext)(i.AmpStateContext),r=(0,a.useContext)(s.HeadManagerContext);return a.default.createElement(l.default,{reduceComponentsToState:reduceComponents,headManager:r,inAmpMode:(0,c.isInAmpMode)(n)},t)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2490:(e,t)=>{"use strict";function getImageBlurSvg(e){let{widthInt:t,heightInt:n,blurWidth:r,blurHeight:o,blurDataURL:a,objectFit:l}=e,i=r?40*r:t,s=o?40*o:n,c=i&&s?"viewBox='0 0 "+i+" "+s+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+c+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(c?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+a+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return getImageBlurSvg}})},1412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{VALID_LOADERS:function(){return n},imageConfigDefault:function(){return r}});let n=["default","imgix","cloudinary","akamai","custom"],r={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},7990:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return s}});let r=n(2147),o=n(5161),a=n(8601),l=n(6686),i=r._(n(8320)),unstable_getImgProps=e=>{(0,a.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,o.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},s=l.Image},8320:(e,t)=>{"use strict";function defaultLoader(e){let{config:t,src:n,width:r,quality:o}=e;return t.path+"?url="+encodeURIComponent(n)+"&w="+r+"&q="+(o||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),defaultLoader.__next_img_default=!0;let n=defaultLoader},4005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return SideEffect}});let r=n(9885),useClientOnlyLayoutEffect=()=>{},useClientOnlyEffect=()=>{};function SideEffect(e){var t;let{headManager:n,reduceComponentsToState:o}=e;function emitChange(){if(n&&n.mountedInstances){let t=r.Children.toArray(Array.from(n.mountedInstances).filter(Boolean));n.updateHead(o(t,e))}}return null==n||null==(t=n.mountedInstances)||t.add(e.children),emitChange(),useClientOnlyLayoutEffect(()=>{var t;return null==n||null==(t=n.mountedInstances)||t.add(e.children),()=>{var t;null==n||null==(t=n.mountedInstances)||t.delete(e.children)}}),useClientOnlyLayoutEffect(()=>(n&&(n._pendingUpdate=emitChange),()=>{n&&(n._pendingUpdate=emitChange)})),useClientOnlyEffect(()=>(n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null),()=>{n&&n._pendingUpdate&&(n._pendingUpdate(),n._pendingUpdate=null)})),null}},8601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return warnOnce}});let warnOnce=e=>{}},2999:(e,t,n)=>{"use strict";e.exports=n(316).vendored.contexts.AmpContext},5851:(e,t,n)=>{"use strict";e.exports=n(316).vendored.contexts.HeadManagerContext},7927:(e,t,n)=>{"use strict";e.exports=n(316).vendored.contexts.ImageConfigContext},713:(e,t,n)=>{"use strict";e.exports=n(316).vendored.contexts.RouterContext},784:(e,t,n)=>{"use strict";e.exports=n(316).vendored["react-ssr"].ReactJsxRuntime},2451:(e,t,n)=>{e.exports=n(7990)},1777:e=>{"use strict";let t="undefined"!=typeof Buffer,n=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,r=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function _parse(e,o,a){null==a&&null!==o&&"object"==typeof o&&(a=o,o=void 0),t&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let l=JSON.parse(e,o);if(null===l||"object"!=typeof l)return l;let i=a&&a.protoAction||"error",s=a&&a.constructorAction||"error";if("ignore"===i&&"ignore"===s)return l;if("ignore"!==i&&"ignore"!==s){if(!1===n.test(e)&&!1===r.test(e))return l}else if("ignore"!==i&&"ignore"===s){if(!1===n.test(e))return l}else if(!1===r.test(e))return l;return filter(l,{protoAction:i,constructorAction:s,safe:a&&a.safe})}function filter(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let o=[e];for(;o.length;){let e=o;for(let a of(o=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(a,"__proto__")){if(!0===r)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete a.__proto__}if("ignore"!==n&&Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw SyntaxError("Object contains forbidden prototype property");delete a.constructor}for(let e in a){let t=a[e];t&&"object"==typeof t&&o.push(t)}}}return e}function parse(e,t,n){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return _parse(e,t,n)}finally{Error.stackTraceLimit=r}}e.exports=parse,e.exports.default=parse,e.exports.parse=parse,e.exports.safeParse=function(e,t){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return _parse(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=n}},e.exports.scan=filter},5715:e=>{e.exports=function(e,t){let n;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let r=0;return function(...o){clearTimeout(n);let a=Date.now(),l=a-r,i=t-l;i<=0?(r=a,e.apply(this,o)):n=setTimeout(()=>{r=Date.now(),e.apply(this,o)},i)}}},4484:(e,t,n)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(9885),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,l=r.useEffect,i=r.useLayoutEffect,s=r.useDebugValue;function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return i(function(){o.value=n,o.getSnapshot=t,checkIfSnapshotChanged(o)&&c({inst:o})},[e,n,t]),l(function(){return checkIfSnapshotChanged(o)&&c({inst:o}),e(function(){checkIfSnapshotChanged(o)&&c({inst:o})})},[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},1928:(e,t,n)=>{"use strict";e.exports=n(4484)},6913:(e,t,n)=>{"use strict";n.d(t,{RJ:()=>dist_useChat});var r,o,a,l=n(9885),i="vercel.ai.error",s=Symbol.for(i),c=class _AISDKError extends Error{constructor({name:e,message:t,cause:n}){super(t),this[o]=!0,this.name=e,this.cause=n}static isInstance(e){return _AISDKError.hasMarker(e,i)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}toJSON(){return{name:this.name,message:this.message}}};o=s;var u=c,d=(Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError"),"AI_InvalidArgumentError"),f=`vercel.ai.error.${d}`,p=Symbol.for(f),g=class extends u{constructor({message:e,cause:t,argument:n}){super({name:d,message:e,cause:t}),this[a]=!0,this.argument=n}static isInstance(e){return u.hasMarker(e,f)}};a=p,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),Symbol.for("vercel.ai.error.AI_JSONParseError"),Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),Symbol.for("vercel.ai.error.AI_TypeValidationError"),Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");let customAlphabet=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var m=n(1777),h=(({prefix:e,size:t=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{let o=customAlphabet(n,t);if(null==e)return o;if(n.includes(r))throw new g({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return t=>`${e}${r}${o(t)}`})();Symbol.for("vercel.ai.validator");var{btoa:_,atob:y}=globalThis;Symbol("Let zodToJsonSchema decide on which parser to use");let getRelativePath=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};var b={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},E={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},v={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},I={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},S={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},w={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},C={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},A={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>null==e||"object"!=typeof e||!("id"in e)||"string"!=typeof e.id||!("type"in e)||"string"!=typeof e.type||!("function"in e)||null==e.function||"object"!=typeof e.function||!("arguments"in e.function)||"string"!=typeof e.function.name||"string"!=typeof e.function.arguments))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},R={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},T={code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},x={code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},O={code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},k={code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},N={code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},j={code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},D={[b.code]:b,[E.code]:E,[v.code]:v,[I.code]:I,[S.code]:S,[w.code]:w,[C.code]:C,[A.code]:A,[R.code]:R,[T.code]:T,[x.code]:x,[O.code]:O,[k.code]:k,[N.code]:N,[j.code]:j};b.name,b.code,E.name,E.code,v.name,v.code,I.name,I.code,S.name,S.code,w.name,w.code,C.name,C.code,A.name,A.code,R.name,R.code,T.name,T.code,x.name,x.code,O.name,O.code,k.name,k.code,N.name,N.code,j.name,j.code;var F=[b,E,v,I,S,w,C,A,R,T,x,O,k,N,j].map(e=>e.code),parseStreamPart=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let n=e.slice(0,t);if(!F.includes(n))throw Error(`Failed to parse stream string. Invalid code ${n}.`);let r=e.slice(t+1),o=JSON.parse(r);return D[n].parse(o)};async function*dist_readDataStream(e,{isAborted:t}={}){let n=new TextDecoder,r=[],o=0;for(;;){let{value:a}=await e.read();if(a&&(r.push(a),o+=a.length,10!==a[a.length-1]))continue;if(0===r.length)break;let l=function(e,t){let n=new Uint8Array(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return e.length=0,n}(r,o);o=0;let i=n.decode(l,{stream:!0}).split("\n").filter(e=>""!==e).map(parseStreamPart);for(let e of i)yield e;if(null==t?void 0:t()){e.cancel();break}}}function assignAnnotationsToMessage(e,t){return e&&t&&t.length?{...e,annotations:[...t]}:e}async function processDataProtocolResponse({reader:e,abortControllerRef:t,update:n,onToolCall:r,onFinish:o,generateId:a=h,getCurrentDate:l=()=>new Date}){var i;let s,c;let u=l(),d={},f=[],p=[],g={},_={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";for await(let{type:o,value:l}of dist_readDataStream(e,{isAborted:()=>(null==t?void 0:t.current)===null})){if("error"===o)throw Error(l);if("finish_step"===o){l.isContinued||(s={});continue}if("finish_message"===o){if(y=l.finishReason,null!=l.usage){let{completionTokens:e,promptTokens:t}=l.usage;_={completionTokens:e,promptTokens:t,totalTokens:e+t}}continue}if(null!=s&&("text"===o||"tool_call"===o||"tool_call_streaming_start"===o||"tool_call_delta"===o||"tool_result"===o)&&(d.text&&f.push(d.text),d.function_call&&f.push(d.function_call),d.tool_calls&&f.push(d.tool_calls),d=s,s=void 0),"text"===o&&(d.text?d.text={...d.text,content:(d.text.content||"")+l}:d.text={id:a(),role:"assistant",content:l,createdAt:u}),"tool_call_streaming_start"===o)null==d.text&&(d.text={id:a(),role:"assistant",content:"",createdAt:u}),null==d.text.toolInvocations&&(d.text.toolInvocations=[]),g[l.toolCallId]={text:"",toolName:l.toolName,prefixMapIndex:d.text.toolInvocations.length},d.text.toolInvocations.push({state:"partial-call",toolCallId:l.toolCallId,toolName:l.toolName,args:void 0});else if("tool_call_delta"===o){let e=g[l.toolCallId];e.text+=l.argsTextDelta;let{value:t}=function(e){if(void 0===e)return{value:void 0,state:"undefined-input"};try{return{value:m.parse(e),state:"successful-parse"}}catch(t){try{return{value:m.parse(function(e){let t=["ROOT"],n=-1,r=null;function processValueStart(e,o,a){switch(e){case'"':n=o,t.pop(),t.push(a),t.push("INSIDE_STRING");break;case"f":case"t":case"n":n=o,r=o,t.pop(),t.push(a),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=o,t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"{":n=o,t.pop(),t.push(a),t.push("INSIDE_OBJECT_START");break;case"[":n=o,t.pop(),t.push(a),t.push("INSIDE_ARRAY_START")}}function processAfterObjectValue(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":n=r,t.pop()}}function processAfterArrayValue(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=r,t.pop()}}for(let o=0;o<e.length;o++){let a=e[o],l=t[t.length-1];switch(l){case"ROOT":processValueStart(a,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(a){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":n=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===a&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===a&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===a&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":processValueStart(a,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":processAfterObjectValue(a,o);break;case"INSIDE_STRING":switch(a){case'"':t.pop(),n=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:n=o}break;case"INSIDE_ARRAY_START":"]"===a?(n=o,t.pop()):(n=o,processValueStart(a,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(a){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=o,t.pop();break;default:n=o}break;case"INSIDE_ARRAY_AFTER_COMMA":processValueStart(a,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),n=o;break;case"INSIDE_NUMBER":switch(a){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&processAfterArrayValue(a,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&processAfterObjectValue(a,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&processAfterObjectValue(a,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&processAfterArrayValue(a,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let l=e.substring(r,o+1);"false".startsWith(l)||"true".startsWith(l)||"null".startsWith(l)?n=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?processAfterObjectValue(a,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&processAfterArrayValue(a,o))}}}let o=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--){let a=t[n];switch(a){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(r,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}}return o}(e)),state:"repaired-parse"}}catch(e){}}return{value:void 0,state:"failed-parse"}}(e.text);d.text.toolInvocations[e.prefixMapIndex]={state:"partial-call",toolCallId:l.toolCallId,toolName:e.toolName,args:t},d.text.internalUpdateId=a()}else if("tool_call"===o){if(null!=g[l.toolCallId]?d.text.toolInvocations[g[l.toolCallId].prefixMapIndex]={state:"call",...l}:(null==d.text&&(d.text={id:a(),role:"assistant",content:"",createdAt:u}),null==d.text.toolInvocations&&(d.text.toolInvocations=[]),d.text.toolInvocations.push({state:"call",...l})),d.text.internalUpdateId=a(),r){let e=await r({toolCall:l});null!=e&&(d.text.toolInvocations[d.text.toolInvocations.length-1]={state:"result",...l,result:e})}}else if("tool_result"===o){let e=null==(i=d.text)?void 0:i.toolInvocations;if(null==e)throw Error("tool_result must be preceded by a tool_call");let t=e.findIndex(e=>e.toolCallId===l.toolCallId);if(-1===t)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");e[t]={...e[t],state:"result",...l}}let e=null;"function_call"===o&&(d.function_call={id:a(),role:"assistant",content:"",function_call:l.function_call,name:l.function_call.name,createdAt:u},e=d.function_call);let t=null;"tool_calls"===o&&(d.tool_calls={id:a(),role:"assistant",content:"",tool_calls:l.tool_calls,createdAt:u},t=d.tool_calls),"data"===o&&p.push(...l);let h=d.text;"message_annotations"===o&&(c?c.push(...l):c=[...l],e=assignAnnotationsToMessage(d.function_call,c),t=assignAnnotationsToMessage(d.tool_calls,c),h=assignAnnotationsToMessage(d.text,c),null!=d.text&&(d.text.internalUpdateId=a())),(null==c?void 0:c.length)&&(d.text&&(d.text.annotations=[...c]),d.function_call&&(d.function_call.annotations=[...c]),d.tool_calls&&(d.tool_calls.annotations=[...c]));let b=[e,t,h].filter(Boolean).map(e=>({...assignAnnotationsToMessage(e,c)}));n([...f,...b],[...p])}return null==o||o({message:d.text,finishReason:y,usage:_}),{messages:[d.text,d.function_call,d.tool_calls].filter(Boolean),data:p}}var dist_getOriginalFetch=()=>fetch;async function callChatApi({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:l,onResponse:i,onUpdate:s,onFinish:c,onToolCall:u,generateId:d,fetch:f=dist_getOriginalFetch()}){var p,g;let m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:null==(p=null==a?void 0:a())?void 0:p.signal,credentials:r}).catch(e=>{throw l(),e});if(i)try{await i(m)}catch(e){throw e}if(!m.ok)throw l(),Error(null!=(g=await m.text())?g:"Failed to fetch the chat response.");if(!m.body)throw Error("The response body is empty.");let h=m.body.getReader();switch(n){case"text":{let e=function(e){let t=new TextDecoder;return function(e){return e?t.decode(e,{stream:!0}):""}}(),t={id:d(),createdAt:new Date,role:"assistant",content:""};for(;;){let{done:n,value:r}=await h.read();if(n)break;if(t.content+=e(r),s([{...t}],[]),(null==a?void 0:a())===null){h.cancel();break}}return null==c||c(t,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"}),{messages:[t],data:[]}}case"data":return await processDataProtocolResponse({reader:h,abortControllerRef:null!=a?{current:a()}:void 0,update:s,onToolCall:u,onFinish({message:e,finishReason:t,usage:n}){c&&null!=e&&c(e,{usage:n,finishReason:t})},generateId:d});default:throw Error(`Unknown stream protocol: ${n}`)}}async function processChatStream({getStreamedResponse:e,experimental_onFunctionCall:t,experimental_onToolCall:n,updateChatRequest:r,getCurrentMessages:o}){for(;;){let a=await e();if("messages"in a){let e=!1;for(let l of a.messages)if(void 0!==l.function_call&&"string"!=typeof l.function_call||void 0!==l.tool_calls&&"string"!=typeof l.tool_calls){if(e=!0,t){let n=l.function_call;if("object"!=typeof n){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let a=await t(o(),n);if(void 0===a){e=!1;break}r(a)}if(n){let t=l.tool_calls;if(!Array.isArray(t)||t.some(e=>"object"!=typeof e)){console.warn("experimental_onToolCall should not be defined when using tools");continue}let a=await n(o(),t);if(void 0===a){e=!1;break}r(a)}}if(!e)break}else{let fixFunctionCallArguments2=function(e){for(let t of e.messages){if(void 0!==t.tool_calls)for(let e of t.tool_calls)"object"==typeof e&&e.function.arguments&&"string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments));void 0!==t.function_call&&"object"==typeof t.function_call&&t.function_call.arguments&&"string"!=typeof t.function_call.arguments&&(t.function_call.arguments=JSON.stringify(t.function_call.arguments))}};if((void 0===a.function_call||"string"==typeof a.function_call)&&(void 0===a.tool_calls||"string"==typeof a.tool_calls))break;if(t){let e=a.function_call;if("object"!=typeof e){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}let n=await t(o(),e);if(void 0===n)break;fixFunctionCallArguments2(n),r(n)}if(n){let e=a.tool_calls;if("object"!=typeof e){console.warn("experimental_onToolCall should not be defined when using functions");continue}let t=await n(o(),e);if(void 0===t)break;fixFunctionCallArguments2(t),r(t)}}}}Symbol.for("vercel.ai.schema");var P=n(1928);let noop=()=>{},M=noop(),U=Object,isUndefined=e=>e===M,isFunction=e=>"function"==typeof e,mergeObjects=(e,t)=>({...e,...t}),isPromiseLike=e=>isFunction(e.then),L=new WeakMap,V=0,stableHash=e=>{let t,n;let r=typeof e,o=e&&e.constructor,a=o==Date;if(U(e)!==e||a||o==RegExp)t=a?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=L.get(e))return t;if(t=++V+"~",L.set(e,t),o==Array){for(n=0,t="@";n<e.length;n++)t+=stableHash(e[n])+",";L.set(e,t)}if(o==U){t="#";let r=U.keys(e).sort();for(;!isUndefined(n=r.pop());)isUndefined(e[n])||(t+=n+":"+stableHash(e[n])+",");L.set(e,t)}}return t},B=new WeakMap,z={},J={},W="undefined",q=typeof window!=W,Y=typeof document!=W,hasRequestAnimationFrame=()=>q&&typeof window.requestAnimationFrame!=W,createCacheHelper=(e,t)=>{let n=B.get(e);return[()=>!isUndefined(t)&&e.get(t)||z,r=>{if(!isUndefined(t)){let o=e.get(t);t in J||(J[t]=o),n[5](t,mergeObjects(o,r),o||z)}},n[6],()=>!isUndefined(t)&&t in J?J[t]:!isUndefined(t)&&e.get(t)||z]},H=!0,[K,G]=q&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],$={initFocus:e=>(Y&&document.addEventListener("visibilitychange",e),K("focus",e),()=>{Y&&document.removeEventListener("visibilitychange",e),G("focus",e)}),initReconnect:e=>{let onOnline=()=>{H=!0,e()},onOffline=()=>{H=!1};return K("online",onOnline),K("offline",onOffline),()=>{G("online",onOnline),G("offline",onOffline)}}},X=!l.useId,Q=!q||"Deno"in window,rAF=e=>hasRequestAnimationFrame()?window.requestAnimationFrame(e):setTimeout(e,1),Z=Q?l.useEffect:l.useLayoutEffect,ee="undefined"!=typeof navigator&&navigator.connection,et=!Q&&ee&&(["slow-2g","2g"].includes(ee.effectiveType)||ee.saveData),_internal_serialize=e=>{if(isFunction(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?stableHash(e):"",t]},en=0,getTimestamp=()=>++en;var er={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function internalMutate(...e){let[t,n,r,o]=e,a=mergeObjects({populateCache:!0,throwOnError:!0},"boolean"==typeof o?{revalidate:o}:o||{}),l=a.populateCache,i=a.rollbackOnError,s=a.optimisticData,rollbackOnError=e=>"function"==typeof i?i(e):!1!==i,c=a.throwOnError;if(isFunction(n)){let e=[],r=t.keys();for(let o of r)!/^\$(inf|sub)\$/.test(o)&&n(t.get(o)._k)&&e.push(o);return Promise.all(e.map(mutateByKey))}return mutateByKey(n);async function mutateByKey(n){let o;let[i]=_internal_serialize(n);if(!i)return;let[u,d]=createCacheHelper(t,i),[f,p,g,m]=B.get(t),startRevalidate=()=>{let e=f[i],t=isFunction(a.revalidate)?a.revalidate(u().data,n):!1!==a.revalidate;return t&&(delete g[i],delete m[i],e&&e[0])?e[0](2).then(()=>u().data):u().data};if(e.length<3)return startRevalidate();let h=r,_=getTimestamp();p[i]=[_,0];let y=!isUndefined(s),b=u(),E=b.data,v=b._c,I=isUndefined(v)?E:v;if(y&&d({data:s=isFunction(s)?s(I,E):s,_c:I}),isFunction(h))try{h=h(I)}catch(e){o=e}if(h&&isPromiseLike(h)){if(h=await h.catch(e=>{o=e}),_!==p[i][0]){if(o)throw o;return h}o&&y&&rollbackOnError(o)&&(l=!0,d({data:I,_c:M}))}if(l&&!o){if(isFunction(l)){let e=l(h,I);d({data:e,error:M,_c:M})}else d({data:h,error:M,_c:M})}if(p[i][1]=getTimestamp(),Promise.resolve(startRevalidate()).then(()=>{d({_c:M})}),o){if(c)throw o;return}return h}}let revalidateAllKeys=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},initCache=(e,t)=>{if(!B.has(e)){let n=mergeObjects($,t),r={},o=internalMutate.bind(M,e),a=noop,l={},subscribe=(e,t)=>{let n=l[e]||[];return l[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},setter=(t,n,r)=>{e.set(t,n);let o=l[t];if(o)for(let e of o)e(n,r)},initProvider=()=>{if(!B.has(e)&&(B.set(e,[r,{},{},{},o,setter,subscribe]),!Q)){let t=n.initFocus(setTimeout.bind(M,revalidateAllKeys.bind(M,r,0))),o=n.initReconnect(setTimeout.bind(M,revalidateAllKeys.bind(M,r,1)));a=()=>{t&&t(),o&&o(),B.delete(e)}}};return initProvider(),[e,o,initProvider,a]}return[e,B.get(e)[4]]},[eo,ea]=initCache(new Map),el=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry:(e,t,n,r,o)=>{let a=n.errorRetryCount,l=o.retryCount,i=~~((Math.random()+.5)*(1<<(l<8?l:8)))*n.errorRetryInterval;(isUndefined(a)||!(l>a))&&setTimeout(r,i,o)},onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:et?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:et?5e3:3e3,compare:(e,t)=>stableHash(e)==stableHash(t),isPaused:()=>!1,cache:eo,mutate:ea,fallback:{}},{isOnline:()=>H,isVisible:()=>{let e=Y&&document.visibilityState;return isUndefined(e)||"hidden"!==e}}),mergeConfigs=(e,t)=>{let n=mergeObjects(e,t);if(t){let{use:r,fallback:o}=e,{use:a,fallback:l}=t;r&&a&&(n.use=r.concat(a)),o&&l&&(n.fallback=mergeObjects(o,l))}return n},ei=(0,l.createContext)({}),es=q&&window.__SWR_DEVTOOLS_USE__,ec=es?window.__SWR_DEVTOOLS_USE__:[],normalize=e=>isFunction(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],useSWRConfig=()=>mergeObjects(el,(0,l.useContext)(ei)),eu=ec.concat(e=>(t,n,r)=>{let o=n&&((...e)=>{let[r]=_internal_serialize(t),[,,,o]=B.get(eo);if(r.startsWith("$inf$"))return n(...e);let a=o[r];return isUndefined(a)?n(...e):(delete o[r],a)});return e(t,o,r)}),subscribeCallback=(e,t,n)=>{let r=t[e]||(t[e]=[]);return r.push(n),()=>{let e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}};es&&(window.__SWR_DEVTOOLS_REACT__=l);let ed=l.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),ef={dedupe:!0};U.defineProperty(e=>{let{value:t}=e,n=(0,l.useContext)(ei),r=isFunction(t),o=(0,l.useMemo)(()=>r?t(n):t,[r,n,t]),a=(0,l.useMemo)(()=>r?o:mergeConfigs(n,o),[r,n,o]),i=o&&o.provider,s=(0,l.useRef)(M);i&&!s.current&&(s.current=initCache(i(a.cache||eo),o));let c=s.current;return c&&(a.cache=c[0],a.mutate=c[1]),Z(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,l.createElement)(ei.Provider,mergeObjects(e,{value:a}))},"defaultValue",{value:el});let ep=(r=(e,t,n)=>{let{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,m,h,_]=B.get(r),[y,b]=_internal_serialize(e),E=(0,l.useRef)(!1),v=(0,l.useRef)(!1),I=(0,l.useRef)(y),S=(0,l.useRef)(t),w=(0,l.useRef)(n),getConfig=()=>w.current,isActive=()=>getConfig().isVisible()&&getConfig().isOnline(),[C,A,R,T]=createCacheHelper(r,y),x=(0,l.useRef)({}).current,O=isUndefined(i)?n.fallback[y]:i,isEqual=(e,t)=>{for(let n in x)if("data"===n){if(!o(e[n],t[n])&&(!isUndefined(e[n])||!o(z,t[n])))return!1}else if(t[n]!==e[n])return!1;return!0},k=(0,l.useMemo)(()=>{let e=!!y&&!!t&&(isUndefined(s)?!getConfig().isPaused()&&!a&&(!!isUndefined(c)||c):s),getSelectedCache=t=>{let n=mergeObjects(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},n=C(),r=T(),o=getSelectedCache(n),l=n===r?o:getSelectedCache(r),i=o;return[()=>{let e=getSelectedCache(C()),t=isEqual(e,i);return t?(i.data=e.data,i.isLoading=e.isLoading,i.isValidating=e.isValidating,i.error=e.error,i):(i=e,e)},()=>l]},[r,y]),N=(0,P.useSyncExternalStore)((0,l.useCallback)(e=>R(y,(t,n)=>{isEqual(n,t)||e()}),[r,y]),k[0],k[1]),j=!E.current,D=g[y]&&g[y].length>0,F=N.data,U=isUndefined(F)?O:F,L=N.error,V=(0,l.useRef)(U),z=p?isUndefined(F)?V.current:F:U,J=(!D||!!isUndefined(L))&&(j&&!isUndefined(s)?s:!getConfig().isPaused()&&(a?!isUndefined(U)&&c:isUndefined(U)||c)),W=!!(y&&t&&j&&J),q=isUndefined(N.isValidating)?W:N.isValidating,Y=isUndefined(N.isLoading)?W:N.isLoading,H=(0,l.useCallback)(async e=>{let t,r;let a=S.current;if(!y||!a||v.current||getConfig().isPaused())return!1;let l=!0,i=e||{},s=!h[y]||!i.dedupe,callbackSafeguard=()=>X?!v.current&&y===I.current&&E.current:y===I.current,c={isValidating:!1,isLoading:!1},finishRequestAndUpdateState=()=>{A(c)},cleanupState=()=>{let e=h[y];e&&e[1]===r&&delete h[y]},u={isValidating:!0};isUndefined(C().data)&&(u.isLoading=!0);try{if(s&&(A(u),n.loadingTimeout&&isUndefined(C().data)&&setTimeout(()=>{l&&callbackSafeguard()&&getConfig().onLoadingSlow(y,n)},n.loadingTimeout),h[y]=[a(b),getTimestamp()]),[t,r]=h[y],t=await t,s&&setTimeout(cleanupState,n.dedupingInterval),!h[y]||h[y][1]!==r)return s&&callbackSafeguard()&&getConfig().onDiscarded(y),!1;c.error=M;let e=m[y];if(!isUndefined(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return finishRequestAndUpdateState(),s&&callbackSafeguard()&&getConfig().onDiscarded(y),!1;let i=C().data;c.data=o(i,t)?i:t,s&&callbackSafeguard()&&getConfig().onSuccess(t,y,n)}catch(n){cleanupState();let e=getConfig(),{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=n,s&&callbackSafeguard()&&(e.onError(n,y,e),(!0===t||isFunction(t)&&t(n))&&(!getConfig().revalidateOnFocus||!getConfig().revalidateOnReconnect||isActive())&&e.onErrorRetry(n,y,e,e=>{let t=g[y];t&&t[0]&&t[0](er.ERROR_REVALIDATE_EVENT,e)},{retryCount:(i.retryCount||0)+1,dedupe:!0})))}return l=!1,finishRequestAndUpdateState(),!0},[y,r]),K=(0,l.useCallback)((...e)=>internalMutate(r,I.current,...e),[]);if(Z(()=>{S.current=t,w.current=n,isUndefined(F)||(V.current=F)}),Z(()=>{if(!y)return;let e=H.bind(M,ef),t=0,n=subscribeCallback(y,g,(n,r={})=>{if(n==er.FOCUS_EVENT){let n=Date.now();getConfig().revalidateOnFocus&&n>t&&isActive()&&(t=n+getConfig().focusThrottleInterval,e())}else if(n==er.RECONNECT_EVENT)getConfig().revalidateOnReconnect&&isActive()&&e();else if(n==er.MUTATE_EVENT)return H();else if(n==er.ERROR_REVALIDATE_EVENT)return H(r)});return v.current=!1,I.current=y,E.current=!0,A({_k:b}),J&&(isUndefined(U)||Q?e():rAF(e)),()=>{v.current=!0,n()}},[y]),Z(()=>{let e;function next(){let t=isFunction(u)?u(C().data):u;t&&-1!==e&&(e=setTimeout(execute,t))}function execute(){!C().error&&(d||getConfig().isVisible())&&(f||getConfig().isOnline())?H(ef).then(next):next()}return next(),()=>{e&&(clearTimeout(e),e=-1)}},[u,d,f,y]),(0,l.useDebugValue)(z),a&&isUndefined(U)&&y){if(!X&&Q)throw Error("Fallback data is required when using suspense in SSR.");S.current=t,w.current=n,v.current=!1;let e=_[y];if(!isUndefined(e)){let t=K(e);ed(t)}if(isUndefined(L)){let e=H(ef);isUndefined(z)||(e.status="fulfilled",e.value=!0),ed(e)}else throw L}return{mutate:K,get data(){return x.data=!0,z},get error(){return x.error=!0,L},get isValidating(){return x.isValidating=!0,q},get isLoading(){return x.isLoading=!0,Y}}},function(...e){let t=useSWRConfig(),[n,o,a]=normalize(e),l=mergeConfigs(t,a),i=r,{use:s}=l,c=(s||[]).concat(eu);for(let e=c.length;e--;)i=c[e](i);return i(n,o||l.fetcher||null,l)});var eg=n(5715);function throttle(e,t){return null!=t?eg(e,t):e}var getStreamedResponse=async(e,t,n,r,o,a,l,i,s,c,u,d,f,p,g,m,h)=>{var _;let y=l.current;n(t.messages,!1);let b=p?t.messages:t.messages.map(({role:e,content:t,experimental_attachments:n,name:r,data:o,annotations:a,toolInvocations:l,function_call:i,tool_calls:s,tool_call_id:c})=>({role:e,content:t,...void 0!==n&&{experimental_attachments:n},...void 0!==r&&{name:r},...void 0!==o&&{data:o},...void 0!==a&&{annotations:a},...void 0!==l&&{toolInvocations:l},tool_call_id:c,...void 0!==i&&{function_call:i},...void 0!==s&&{tool_calls:s}})),E=o.current;return await callChatApi({api:e,body:null!=(_=null==g?void 0:g({messages:t.messages,requestData:t.data,requestBody:t.body}))?_:{messages:b,data:t.data,...a.current.body,...t.body,...void 0!==t.functions&&{functions:t.functions},...void 0!==t.function_call&&{function_call:t.function_call},...void 0!==t.tools&&{tools:t.tools},...void 0!==t.tool_choice&&{tool_choice:t.tool_choice}},streamProtocol:c,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>i.current,restoreMessagesOnFailure(){h||n(y,!1)},onResponse:d,onUpdate(e,o){n([...t.messages,...e],!1),r([...null!=E?E:[],...null!=o?o:[]],!1)},onToolCall:f,onFinish:u,generateId:s,fetch:m})};function isAssistantMessageWithCompletedToolCalls(e){return"assistant"===e.role&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(e=>"result"in e)}async function prepareAttachmentsForRequest(e){if(null==e)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async e=>{let{name:t,type:n}=e,r=await new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>n(e),r.readAsDataURL(e)});return{name:t,contentType:n,url:r}}));if(Array.isArray(e))return e;throw Error("Invalid attachments type")}var dist_useChat=function({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,experimental_onFunctionCall:a,experimental_onToolCall:i,onToolCall:s,experimental_prepareRequestBody:c,experimental_maxAutomaticRoundtrips:u=0,maxAutomaticRoundtrips:d=u,maxToolRoundtrips:f=d,maxSteps:p=null!=f?f+1:1,streamMode:g,streamProtocol:m,onResponse:_,onFinish:y,onError:b,credentials:E,headers:v,body:I,generateId:S=h,fetch:w,keepLastMessageOnError:C=!1,experimental_throttle:A}={}){g&&(null!=m||(m="text"===g?"text":void 0));let R=(0,l.useId)(),T=null!=t?t:R,x="string"==typeof e?[e,T]:T,[O]=(0,l.useState)([]),{data:k,mutate:N}=ep([x,"messages"],null,{fallbackData:null!=n?n:O}),j=(0,l.useRef)(k||[]);(0,l.useEffect)(()=>{j.current=k||[]},[k]);let{data:D,mutate:F}=ep([x,"streamData"],null),P=(0,l.useRef)(D);(0,l.useEffect)(()=>{P.current=D},[D]);let{data:M=!1,mutate:U}=ep([x,"loading"],null),{data:L,mutate:V}=ep([x,"error"],null),B=(0,l.useRef)(null),z=(0,l.useRef)({credentials:E,headers:v,body:I});(0,l.useEffect)(()=>{z.current={credentials:E,headers:v,body:I}},[E,v,I]);let J=(0,l.useCallback)(async t=>{let n=j.current.length;try{U(!0),V(void 0);let n=new AbortController;B.current=n,await processChatStream({getStreamedResponse:()=>getStreamedResponse(e,t,throttle(N,A),throttle(F,A),P,z,j,B,S,m,y,_,s,o,c,w,C),experimental_onFunctionCall:a,experimental_onToolCall:i,updateChatRequest:e=>{t=e},getCurrentMessages:()=>j.current}),B.current=null}catch(e){if("AbortError"===e.name)return B.current=null,null;b&&e instanceof Error&&b(e),V(e)}finally{U(!1)}let r=j.current,l=r[r.length-1];r.length>n&&null!=l&&p>1&&isAssistantMessageWithCompletedToolCalls(l)&&function(e){let t=0;for(let n=e.length-1;n>=0;n--)if("assistant"===e[n].role)t++;else break;return t}(r)<p&&await J({messages:r})},[N,U,e,z,_,y,b,V,F,P,m,o,a,i,c,s,p,j,B,S,w,C,A]),W=(0,l.useCallback)(async(e,{options:t,functions:n,function_call:r,tools:o,tool_choice:a,data:l,headers:i,body:s,experimental_attachments:c}={})=>{var u,d;e.id||(e.id=S());let f=await prepareAttachmentsForRequest(c),p={headers:null!=i?i:null==t?void 0:t.headers,body:null!=s?s:null==t?void 0:t.body},g=j.current.concat({...e,id:null!=(u=e.id)?u:S(),createdAt:null!=(d=e.createdAt)?d:new Date,experimental_attachments:f.length>0?f:void 0}),m={messages:g,options:p,headers:p.headers,body:p.body,data:l,...void 0!==n&&{functions:n},...void 0!==r&&{function_call:r},...void 0!==o&&{tools:o},...void 0!==a&&{tool_choice:a}};return J(m)},[J,S]),q=(0,l.useCallback)(async({options:e,functions:t,function_call:n,tools:r,tool_choice:o,data:a,headers:l,body:i}={})=>{if(0===j.current.length)return null;let s={headers:null!=l?l:null==e?void 0:e.headers,body:null!=i?i:null==e?void 0:e.body},c=j.current[j.current.length-1];if("assistant"===c.role){let e={messages:j.current.slice(0,-1),options:s,headers:s.headers,body:s.body,data:a,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}};return J(e)}let u={messages:j.current,options:s,headers:s.headers,body:s.body,data:a,...void 0!==t&&{functions:t},...void 0!==n&&{function_call:n},...void 0!==r&&{tools:r},...void 0!==o&&{tool_choice:o}};return J(u)},[J]),Y=(0,l.useCallback)(()=>{B.current&&(B.current.abort(),B.current=null)},[]),H=(0,l.useCallback)(e=>{"function"==typeof e&&(e=e(j.current)),N(e,!1),j.current=e},[N]),K=(0,l.useCallback)(e=>{"function"==typeof e&&(e=e(P.current)),F(e,!1),P.current=e},[F]),[G,$]=(0,l.useState)(r),X=(0,l.useCallback)(async(e,t={},n)=>{var r,o,a,l,i;if(null==(r=null==e?void 0:e.preventDefault)||r.call(e),!G&&!t.allowEmptySubmit)return;n&&(z.current={...z.current,...n});let s=await prepareAttachmentsForRequest(t.experimental_attachments),c={headers:null!=(a=t.headers)?a:null==(o=t.options)?void 0:o.headers,body:null!=(i=t.body)?i:null==(l=t.options)?void 0:l.body},u=G||s.length||!t.allowEmptySubmit?j.current.concat({id:S(),createdAt:new Date,role:"user",content:G,experimental_attachments:s.length>0?s:void 0}):j.current,d={messages:u,options:c,headers:c.headers,body:c.body,data:t.data};J(d),$("")},[G,S,J]),addToolResult=({toolCallId:e,result:t})=>{let n=j.current.map((n,r,o)=>r===o.length-1&&"assistant"===n.role&&n.toolInvocations?{...n,toolInvocations:n.toolInvocations.map(n=>n.toolCallId===e?{...n,result:t}:n)}:n);N(n,!1);let r=n[n.length-1];isAssistantMessageWithCompletedToolCalls(r)&&J({messages:n})};return{messages:k||[],setMessages:H,data:D,setData:K,error:L,append:W,reload:q,stop:Y,input:G,setInput:$,handleInputChange:e=>{$(e.target.value)},handleSubmit:X,isLoading:M,addToolResult,experimental_addToolResult:addToolResult}}}};