(()=>{var e={};e.id=81,e.ids=[81],e.modules={3057:e=>{function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=3057,e.exports=webpackEmptyContext},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},7561:e=>{"use strict";e.exports=require("node:fs")},4492:e=>{"use strict";e.exports=require("node:stream")},2477:e=>{"use strict";e.exports=require("node:stream/web")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},2986:(e,t,r)=>{"use strict";let i;r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>C,requestAsyncStorage:()=>b,routeModule:()=>q,serverHooks:()=>h,staticGenerationAsyncStorage:()=>E,staticGenerationBailout:()=>k});var s={};r.r(s),r.d(s,{POST:()=>POST}),r(8976);var a=r(884),o=r(6132),n=r(7399),u=r(2169),c=r(6718);i=r(1675).DataAPIClient,c.config();let{ASTRA_DB_NAMESPACE:l,ASTRA_DB_COLLECTION:p,ASTRA_DB_API_ENDPOINT:d,ASTRA_DB_APPLICATION_TOKEN:m,OPENAI_API_KEY:x}=process.env,g=new n.ZP({apiKey:x}),f=new i(m),w=f.db(d,{namespace:l});async function POST(e){try{let{messages:t}=await e.json(),r=t[t?.length-1]?.content,i="",s=await g.embeddings.create({model:"text-embedding-3-small",input:r,encoding_format:"float"});try{let e=await w.collection(p),t=e.find(null,{sort:{$vector:s.data[0].embedding},limit:10}),r=await t.toArray(),a=r?.map(e=>e.text);i=JSON.stringify(a)}catch(e){console.error("Error querying DB:",e),i=""}let a={role:"system",content:`Ești un asistent AI care știe totul despre legislatia din Romania.
    Folosind contextul de mai jos, poți să-ți completezi cunoștințele despre legea din Romania.
    Contextul \xeeți va furniza toate legile din Codul Muncii, Codul Fiscal si Codul Penal.
    Raspunde in propozitii ample. Intelege faptul ca in raspunsul tau nu poti sa te referi la alineate din context, deoarece utilizatorul nu are acces la context, daca acel context este relevant, include-l de asemenea in raspunsul tau.

    De fiecare dată c\xe2nd răspunzi:

    Include și sursa informației tale.
    Dacă există un link către acea pagină, include-l de asemenea.
    Dacă contextul nu conține informațiile necesare, nu răspunde pe baza cunoștințelor tale existente și menționează că nu știi.

    Formatul răspunsurilor trebuie să folosească markdown unde este posibil și să nu conțină imagini.

    Te rog să răspunzi doar pe baza acestui citat și să te referi la link-ul acestuia drept sursa. NU AI VOIE, REPET NU AI VOIE SA RASPUNZI DINAFARA SURSEI.
            ------------
            START CONTEXT
            ${i}
            END CONTEXT
            ------------`};console.log(i);let o=await g.chat.completions.create({model:"gpt-4o-mini",stream:!0,messages:[a,...t]}),n=(0,u.HP)(o);return new u.wn(n)}catch(e){return console.error("Error in POST function:",e),new Response("Error processing request",{status:500})}}let q=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/chat/route",pathname:"/chat",filename:"route",bundlePath:"app/chat/route"},resolvedPagePath:"C:\\Tutorial_Rag\\app\\chat\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:b,staticGenerationAsyncStorage:E,serverHooks:h,headerHooks:y,staticGenerationBailout:k}=q,C="/chat/route"}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[364,718,605,126],()=>__webpack_exec__(2986));module.exports=r})();