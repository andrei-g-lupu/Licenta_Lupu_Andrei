/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/@datastax/astra-db-ts/dist/api/fetch sync recursive":
/*!*****************************************************************!*\
  !*** ./node_modules/@datastax/astra-db-ts/dist/api/fetch/ sync ***!
  \*****************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/@datastax/astra-db-ts/dist/api/fetch sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CTutorial_Rag%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTutorial_Rag&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CTutorial_Rag%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTutorial_Rag&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Tutorial_Rag_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Tutorial_Rag\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Tutorial_Rag_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/chat/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVHV0b3JpYWxfUmFnJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVHV0b3JpYWxfUmFnJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ3NEO0FBQ3ZDO0FBQ1E7QUFDdkU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLWZpcnN0X2NoYXRib3QvPzc5MGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwibmV4dC9kaXN0L3NlcnZlci9ub2RlLXBvbHlmaWxsLWhlYWRlcnNcIjtcbmltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFR1dG9yaWFsX1JhZ1xcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVHV0b3JpYWxfUmFnXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CTutorial_Rag%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTutorial_Rag&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai */ \"(rsc)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n\n\nlet DataAPIClient;\nif (true) {\n    DataAPIClient = (__webpack_require__(/*! @datastax/astra-db-ts */ \"(rsc)/./node_modules/@datastax/astra-db-ts/dist/index.js\").DataAPIClient);\n}\n// import { openai } from '@ai-sdk/openai';\n// import {OpenAIStream, StreamingTextResponse} from \"ai\"\n\ndotenv__WEBPACK_IMPORTED_MODULE_0__.config(); // Load .env file\nconst { ASTRA_DB_NAMESPACE, ASTRA_DB_COLLECTION, ASTRA_DB_API_ENDPOINT, ASTRA_DB_APPLICATION_TOKEN, OPENAI_API_KEY } = process.env;\n//   const openai = new OpenAI({\n//     apiKey: process.env.OPENAI_API_KEY\n//   })\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: OPENAI_API_KEY\n});\nconst client = new DataAPIClient(ASTRA_DB_APPLICATION_TOKEN);\nconst db = client.db(ASTRA_DB_API_ENDPOINT, {\n    namespace: ASTRA_DB_NAMESPACE\n});\nasync function POST(req) {\n    try {\n        const { messages } = await req.json();\n        const latestMessage = messages[messages?.length - 1]?.content;\n        let docContext = \"\";\n        const embedding = await openai.embeddings.create({\n            model: \"text-embedding-3-small\",\n            input: latestMessage,\n            encoding_format: \"float\"\n        });\n        try {\n            const collection = await db.collection(ASTRA_DB_COLLECTION);\n            const cursor = collection.find(null, {\n                sort: {\n                    $vector: embedding.data[0].embedding\n                },\n                limit: 10\n            });\n            const documents = await cursor.toArray();\n            const docsMap = documents?.map((doc)=>doc.text);\n            docContext = JSON.stringify(docsMap);\n        } catch (error) {\n            console.error(\"Error querying DB:\", error);\n            docContext = \"\";\n        }\n        const template = {\n            role: \"system\",\n            content: `Ești un asistent AI care știe totul despre legislatia din Romania.\r\n    Folosind contextul de mai jos, poți să-ți completezi cunoștințele despre legea din Romania.\r\n    Contextul îți va furniza toate legile din Codul Muncii, Codul Fiscal si Codul Penal.\r\n    Raspunde in propozitii ample. Intelege faptul ca in raspunsul tau nu poti sa te referi la alineate din context, deoarece utilizatorul nu are acces la context, daca acel context este relevant, include-l de asemenea in raspunsul tau.\r\n\r\n    De fiecare dată când răspunzi:\r\n\r\n    Include și sursa informației tale.\r\n    Dacă există un link către acea pagină, include-l de asemenea.\r\n    Dacă contextul nu conține informațiile necesare, nu răspunde pe baza cunoștințelor tale existente și menționează că nu știi.\r\n\r\n    Formatul răspunsurilor trebuie să folosească markdown unde este posibil și să nu conțină imagini.\r\n\r\n    Te rog să răspunzi doar pe baza acestui citat și să te referi la link-ul acestuia drept sursa. NU AI VOIE, REPET NU AI VOIE SA RASPUNZI DINAFARA SURSEI.\r\n            ------------\r\n            START CONTEXT\r\n            ${docContext}\r\n            END CONTEXT\r\n            ------------`\n        };\n        console.log(docContext);\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4o-mini\",\n            stream: true,\n            messages: [\n                template,\n                ...messages\n            ] // Include system prompt and user messages\n        });\n        const stream = (0,ai__WEBPACK_IMPORTED_MODULE_2__.OpenAIStream)(response);\n        return new ai__WEBPACK_IMPORTED_MODULE_2__.StreamingTextResponse(stream);\n    } catch (error) {\n        console.error(\"Error in POST function:\", error);\n        return new Response(\"Error processing request\", {\n            status: 500\n        }); // Return an error response\n    }\n} // import { OpenAI } from \"openai\";\n // import { DataAPIClient } from \"@datastax/astra-db-ts\";\n // import * as dotenv from \"dotenv\";\n // dotenv.config(); // Load .env file\n // const { ASTRA_DB_NAMESPACE, ASTRA_DB_COLLECTION, ASTRA_DB_API_ENDPOINT, ASTRA_DB_APPLICATION_TOKEN, OPENAI_API_KEY } = process.env;\n // const openai = new OpenAI(\n //   new Configuration({\n //     apiKey: OPENAI_API_KEY,\n //   })\n // );\n // const client = new DataAPIClient(ASTRA_DB_APPLICATION_TOKEN);\n // const db = client.db(ASTRA_DB_API_ENDPOINT, { namespace: ASTRA_DB_NAMESPACE });\n // export async function POST(req) {\n //   try {\n //     const { messages } = await req.json();\n //     if (!messages || messages.length === 0) {\n //       return new Response(\"No messages provided.\", { status: 400 });\n //     }\n //     const embedding = await openai.createEmbedding({\n //       model: \"text-embedding-ada-002\",\n //       input: messages[messages.length - 1].content,\n //     });\n //     let docContext = \"\";\n //     try {\n //       const collection = await db.collection(ASTRA_DB_COLLECTION);\n //       const cursor = collection.find(\n //         { $vector: { $near: { vector: embedding.data[0].embedding, distance: 10 } } },\n //         { limit: 10 }\n //       );\n //       const documents = await cursor.toArray();\n //       docContext = JSON.stringify(documents.map((doc) => doc.text));\n //     } catch (dbError) {\n //       console.error(\"DB Error:\", dbError);\n //     }\n //     const systemPrompt = {\n //       role: \"system\",\n //       content: `You are an AI assistant for Formula One knowledge.`,\n //     };\n //     const response = await openai. chat.completions.create({\n //       model: \"gpt-4o-mini\",\n //       messages: [systemPrompt, ...messages],\n //       stream: true,\n //     });\n //     const encoder = new TextEncoder();\n //     const stream = new ReadableStream({\n //       start(controller) {\n //         response.data.on(\"data\", (chunk) => {\n //           controller.enqueue(encoder.encode(chunk));\n //         });\n //         response.data.on(\"end\", () => {\n //           controller.close();\n //         });\n //         response.data.on(\"error\", (err) => {\n //           console.error(\"Stream error:\", err);\n //           controller.error(err);\n //         });\n //       },\n //     });\n //     return new Response(stream, {\n //       headers: { \"Content-Type\": \"text/event-stream\" },\n //     });\n //   } catch (error) {\n //     console.error(\"Error:\", error);\n //     return new Response(\"Error processing request\", { status: 500 });\n //   }\n // }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VTtDQUVWLDJCQUEyQjtDQUUzQixZQUFZO0NBQ1oscUVBQXFFO0NBQ3JFLHdDQUF3QztDQUN4Qyx5RkFBeUY7Q0FDekYsd0JBQXdCO0NBQ3hCLFdBQVc7Q0FDWCxrREFBa0Q7Q0FDbEQsdUVBQXVFO0NBQ3ZFLDBCQUEwQjtDQUMxQiw2Q0FBNkM7Q0FDN0MsUUFBUTtDQUVSLDZCQUE2QjtDQUM3Qix3QkFBd0I7Q0FDeEIsdUVBQXVFO0NBQ3ZFLFNBQVM7Q0FFVCwrREFBK0Q7Q0FDL0QsOEJBQThCO0NBQzlCLCtDQUErQztDQUMvQyxzQkFBc0I7Q0FDdEIsVUFBVTtDQUVWLHlDQUF5QztDQUN6QywwQ0FBMEM7Q0FDMUMsNEJBQTRCO0NBQzVCLGdEQUFnRDtDQUNoRCx1REFBdUQ7Q0FDdkQsY0FBYztDQUVkLDBDQUEwQztDQUMxQyxnQ0FBZ0M7Q0FDaEMsY0FBYztDQUVkLCtDQUErQztDQUMvQyxpREFBaUQ7Q0FDakQsbUNBQW1DO0NBQ25DLGNBQWM7Q0FDZCxXQUFXO0NBQ1gsVUFBVTtDQUVWLG9DQUFvQztDQUNwQywwREFBMEQ7Q0FDMUQsVUFBVTtDQUNWLHNCQUFzQjtDQUN0QixzQ0FBc0M7Q0FDdEMsd0VBQXdFO0NBQ3hFLE1BQU07Q0FDTixJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLWZpcnN0X2NoYXRib3QvLi9hcHAvYXBpL2NoYXQvcm91dGUudHM/ZGU0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XHJcbmltcG9ydCB7T3BlbkFJU3RyZWFtLCBTdHJlYW1pbmdUZXh0UmVzcG9uc2V9IGZyb20gXCJhaVwiO1xyXG5sZXQgRGF0YUFQSUNsaWVudDtcclxuaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICBEYXRhQVBJQ2xpZW50ID0gcmVxdWlyZShcIkBkYXRhc3RheC9hc3RyYS1kYi10c1wiKS5EYXRhQVBJQ2xpZW50O1xyXG59XHJcblxyXG5pbXBvcnQgeyBzdHJlYW1PYmplY3QsIHN0cmVhbVRleHQgfSBmcm9tIFwiYWlcIjtcclxuaW1wb3J0IHsgQ2hhdENvbXBsZXRpb25TdHJlYW1pbmdSdW5uZXIgfSBmcm9tIFwib3BlbmFpL2xpYi9DaGF0Q29tcGxldGlvblN0cmVhbWluZ1J1bm5lclwiO1xyXG4vLyBpbXBvcnQgeyBvcGVuYWkgfSBmcm9tICdAYWktc2RrL29wZW5haSc7XHJcblxyXG4vLyBpbXBvcnQge09wZW5BSVN0cmVhbSwgU3RyZWFtaW5nVGV4dFJlc3BvbnNlfSBmcm9tIFwiYWlcIlxyXG5pbXBvcnQgKiBhcyBkb3RlbnYgZnJvbSAnZG90ZW52JztcclxuZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIC5lbnYgZmlsZVxyXG5cclxuY29uc3Qge1xyXG4gICAgQVNUUkFfREJfTkFNRVNQQUNFLFxyXG4gICAgQVNUUkFfREJfQ09MTEVDVElPTixcclxuICAgIEFTVFJBX0RCX0FQSV9FTkRQT0lOVCxcclxuICAgIEFTVFJBX0RCX0FQUExJQ0FUSU9OX1RPS0VOLFxyXG4gICAgT1BFTkFJX0FQSV9LRVksXHJcbiAgfSA9IHByb2Nlc3MuZW52O1xyXG5cclxuLy8gICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcclxuLy8gICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVlcclxuLy8gICB9KVxyXG5cclxuICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcclxuICAgIGFwaUtleTogT1BFTkFJX0FQSV9LRVlcclxuICB9KVxyXG4gIFxyXG5cclxuICBjb25zdCBjbGllbnQgPSBuZXcgRGF0YUFQSUNsaWVudChBU1RSQV9EQl9BUFBMSUNBVElPTl9UT0tFTilcclxuICBjb25zdCBkYiA9IGNsaWVudC5kYihBU1RSQV9EQl9BUElfRU5EUE9JTlQsIHtuYW1lc3BhY2U6IEFTVFJBX0RCX05BTUVTUEFDRX0pXHJcblxyXG5cclxuXHJcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZXMgfSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhdGVzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcz8ubGVuZ3RoLTFdPy5jb250ZW50XHJcblxyXG4gICAgICAgIGxldCBkb2NDb250ZXh0ID0gXCJcIjtcclxuXHJcbiAgICAgICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgb3BlbmFpLmVtYmVkZGluZ3MuY3JlYXRlKHtcclxuICAgICAgICAgICAgbW9kZWw6IFwidGV4dC1lbWJlZGRpbmctMy1zbWFsbFwiLFxyXG4gICAgICAgICAgICBpbnB1dDogbGF0ZXN0TWVzc2FnZSwgXHJcbiAgICAgICAgICAgIGVuY29kaW5nX2Zvcm1hdDogXCJmbG9hdFwiXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBkYi5jb2xsZWN0aW9uKEFTVFJBX0RCX0NPTExFQ1RJT04pO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBjb2xsZWN0aW9uLmZpbmQobnVsbCwge1xyXG4gICAgICAgICAgICAgICAgc29ydDogeyAkdmVjdG9yOiBlbWJlZGRpbmcuZGF0YVswXS5lbWJlZGRpbmcgfSxcclxuICAgICAgICAgICAgICAgIGxpbWl0OiAxMFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvY3NNYXAgPSBkb2N1bWVudHM/Lm1hcChkb2MgPT4gZG9jLnRleHQpO1xyXG4gICAgICAgICAgICBkb2NDb250ZXh0ID0gSlNPTi5zdHJpbmdpZnkoZG9jc01hcCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBxdWVyeWluZyBEQjpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICBkb2NDb250ZXh0ID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0ge1xyXG4gICAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxyXG4gICAgICAgICAgICBjb250ZW50OiBgRciZdGkgdW4gYXNpc3RlbnQgQUkgY2FyZSDImXRpZSB0b3R1bCBkZXNwcmUgbGVnaXNsYXRpYSBkaW4gUm9tYW5pYS5cclxuICAgIEZvbG9zaW5kIGNvbnRleHR1bCBkZSBtYWkgam9zLCBwb8ibaSBzxIMtyJtpIGNvbXBsZXRlemkgY3Vub8iZdGluyJtlbGUgZGVzcHJlIGxlZ2VhIGRpbiBSb21hbmlhLlxyXG4gICAgQ29udGV4dHVsIMOuyJtpIHZhIGZ1cm5pemEgdG9hdGUgbGVnaWxlIGRpbiBDb2R1bCBNdW5jaWksIENvZHVsIEZpc2NhbCBzaSBDb2R1bCBQZW5hbC5cclxuICAgIFJhc3B1bmRlIGluIHByb3Bveml0aWkgYW1wbGUuIEludGVsZWdlIGZhcHR1bCBjYSBpbiByYXNwdW5zdWwgdGF1IG51IHBvdGkgc2EgdGUgcmVmZXJpIGxhIGFsaW5lYXRlIGRpbiBjb250ZXh0LCBkZW9hcmVjZSB1dGlsaXphdG9ydWwgbnUgYXJlIGFjY2VzIGxhIGNvbnRleHQsIGRhY2EgYWNlbCBjb250ZXh0IGVzdGUgcmVsZXZhbnQsIGluY2x1ZGUtbCBkZSBhc2VtZW5lYSBpbiByYXNwdW5zdWwgdGF1LlxyXG5cclxuICAgIERlIGZpZWNhcmUgZGF0xIMgY8OibmQgcsSDc3B1bnppOlxyXG5cclxuICAgIEluY2x1ZGUgyJlpIHN1cnNhIGluZm9ybWHIm2llaSB0YWxlLlxyXG4gICAgRGFjxIMgZXhpc3TEgyB1biBsaW5rIGPEg3RyZSBhY2VhIHBhZ2luxIMsIGluY2x1ZGUtbCBkZSBhc2VtZW5lYS5cclxuICAgIERhY8SDIGNvbnRleHR1bCBudSBjb27Im2luZSBpbmZvcm1hyJtpaWxlIG5lY2VzYXJlLCBudSByxINzcHVuZGUgcGUgYmF6YSBjdW5vyJl0aW7Im2Vsb3IgdGFsZSBleGlzdGVudGUgyJlpIG1lbsibaW9uZWF6xIMgY8SDIG51IMiZdGlpLlxyXG5cclxuICAgIEZvcm1hdHVsIHLEg3NwdW5zdXJpbG9yIHRyZWJ1aWUgc8SDIGZvbG9zZWFzY8SDIG1hcmtkb3duIHVuZGUgZXN0ZSBwb3NpYmlsIMiZaSBzxIMgbnUgY29uyJtpbsSDIGltYWdpbmkuXHJcblxyXG4gICAgVGUgcm9nIHPEgyByxINzcHVuemkgZG9hciBwZSBiYXphIGFjZXN0dWkgY2l0YXQgyJlpIHPEgyB0ZSByZWZlcmkgbGEgbGluay11bCBhY2VzdHVpYSBkcmVwdCBzdXJzYS4gTlUgQUkgVk9JRSwgUkVQRVQgTlUgQUkgVk9JRSBTQSBSQVNQVU5aSSBESU5BRkFSQSBTVVJTRUkuXHJcbiAgICAgICAgICAgIC0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICBTVEFSVCBDT05URVhUXHJcbiAgICAgICAgICAgICR7ZG9jQ29udGV4dH1cclxuICAgICAgICAgICAgRU5EIENPTlRFWFRcclxuICAgICAgICAgICAgLS0tLS0tLS0tLS0tYFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc29sZS5sb2coZG9jQ29udGV4dClcclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICBtb2RlbDogXCJncHQtNG8tbWluaVwiLCAvL1xyXG4gICAgICAgICAgICBzdHJlYW06IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbdGVtcGxhdGUsIC4uLm1lc3NhZ2VzXSAvLyBJbmNsdWRlIHN5c3RlbSBwcm9tcHQgYW5kIHVzZXIgbWVzc2FnZXNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gT3BlbkFJU3RyZWFtKHJlc3BvbnNlKVxyXG4gICAgICAgIHJldHVybiBuZXcgU3RyZWFtaW5nVGV4dFJlc3BvbnNlKHN0cmVhbSlcclxuXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gUE9TVCBmdW5jdGlvbjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJFcnJvciBwcm9jZXNzaW5nIHJlcXVlc3RcIiwgeyBzdGF0dXM6IDUwMCB9KTsgLy8gUmV0dXJuIGFuIGVycm9yIHJlc3BvbnNlXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8gaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSBcIm9wZW5haVwiO1xyXG4vLyBpbXBvcnQgeyBEYXRhQVBJQ2xpZW50IH0gZnJvbSBcIkBkYXRhc3RheC9hc3RyYS1kYi10c1wiO1xyXG4vLyBpbXBvcnQgKiBhcyBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5cclxuLy8gZG90ZW52LmNvbmZpZygpOyAvLyBMb2FkIC5lbnYgZmlsZVxyXG5cclxuLy8gY29uc3QgeyBBU1RSQV9EQl9OQU1FU1BBQ0UsIEFTVFJBX0RCX0NPTExFQ1RJT04sIEFTVFJBX0RCX0FQSV9FTkRQT0lOVCwgQVNUUkFfREJfQVBQTElDQVRJT05fVE9LRU4sIE9QRU5BSV9BUElfS0VZIH0gPSBwcm9jZXNzLmVudjtcclxuXHJcbi8vIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoXHJcbi8vICAgbmV3IENvbmZpZ3VyYXRpb24oe1xyXG4vLyAgICAgYXBpS2V5OiBPUEVOQUlfQVBJX0tFWSxcclxuLy8gICB9KVxyXG4vLyApO1xyXG5cclxuLy8gY29uc3QgY2xpZW50ID0gbmV3IERhdGFBUElDbGllbnQoQVNUUkFfREJfQVBQTElDQVRJT05fVE9LRU4pO1xyXG4vLyBjb25zdCBkYiA9IGNsaWVudC5kYihBU1RSQV9EQl9BUElfRU5EUE9JTlQsIHsgbmFtZXNwYWNlOiBBU1RSQV9EQl9OQU1FU1BBQ0UgfSk7XHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXEpIHtcclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgeyBtZXNzYWdlcyB9ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuXHJcbi8vICAgICBpZiAoIW1lc3NhZ2VzIHx8IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4vLyAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFwiTm8gbWVzc2FnZXMgcHJvdmlkZWQuXCIsIHsgc3RhdHVzOiA0MDAgfSk7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3QgZW1iZWRkaW5nID0gYXdhaXQgb3BlbmFpLmNyZWF0ZUVtYmVkZGluZyh7XHJcbi8vICAgICAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIixcclxuLy8gICAgICAgaW5wdXQ6IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdLmNvbnRlbnQsXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICBsZXQgZG9jQ29udGV4dCA9IFwiXCI7XHJcblxyXG4vLyAgICAgdHJ5IHtcclxuLy8gICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oQVNUUkFfREJfQ09MTEVDVElPTik7XHJcbi8vICAgICAgIGNvbnN0IGN1cnNvciA9IGNvbGxlY3Rpb24uZmluZChcclxuLy8gICAgICAgICB7ICR2ZWN0b3I6IHsgJG5lYXI6IHsgdmVjdG9yOiBlbWJlZGRpbmcuZGF0YVswXS5lbWJlZGRpbmcsIGRpc3RhbmNlOiAxMCB9IH0gfSxcclxuLy8gICAgICAgICB7IGxpbWl0OiAxMCB9XHJcbi8vICAgICAgICk7XHJcbi8vICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcbi8vICAgICAgIGRvY0NvbnRleHQgPSBKU09OLnN0cmluZ2lmeShkb2N1bWVudHMubWFwKChkb2MpID0+IGRvYy50ZXh0KSk7XHJcbi8vICAgICB9IGNhdGNoIChkYkVycm9yKSB7XHJcbi8vICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEQiBFcnJvcjpcIiwgZGJFcnJvcik7XHJcbi8vICAgICB9XHJcblxyXG4vLyAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0ge1xyXG4vLyAgICAgICByb2xlOiBcInN5c3RlbVwiLFxyXG4vLyAgICAgICBjb250ZW50OiBgWW91IGFyZSBhbiBBSSBhc3Npc3RhbnQgZm9yIEZvcm11bGEgT25lIGtub3dsZWRnZS5gLFxyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS4gY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4vLyAgICAgICBtb2RlbDogXCJncHQtNG8tbWluaVwiLFxyXG4vLyAgICAgICBtZXNzYWdlczogW3N5c3RlbVByb21wdCwgLi4ubWVzc2FnZXNdLFxyXG4vLyAgICAgICBzdHJlYW06IHRydWUsXHJcbi8vICAgICB9KTtcclxuXHJcbi8vICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XHJcbi8vICAgICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xyXG4vLyAgICAgICBzdGFydChjb250cm9sbGVyKSB7XHJcbi8vICAgICAgICAgcmVzcG9uc2UuZGF0YS5vbihcImRhdGFcIiwgKGNodW5rKSA9PiB7XHJcbi8vICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoY2h1bmspKTtcclxuLy8gICAgICAgICB9KTtcclxuXHJcbi8vICAgICAgICAgcmVzcG9uc2UuZGF0YS5vbihcImVuZFwiLCAoKSA9PiB7XHJcbi8vICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XHJcbi8vICAgICAgICAgfSk7XHJcblxyXG4vLyAgICAgICAgIHJlc3BvbnNlLmRhdGEub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XHJcbi8vICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiU3RyZWFtIGVycm9yOlwiLCBlcnIpO1xyXG4vLyAgICAgICAgICAgY29udHJvbGxlci5lcnJvcihlcnIpO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vLyAgICAgICB9LFxyXG4vLyAgICAgfSk7XHJcblxyXG4vLyAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShzdHJlYW0sIHtcclxuLy8gICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcInRleHQvZXZlbnQtc3RyZWFtXCIgfSxcclxuLy8gICAgIH0pO1xyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcclxuLy8gICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXCJFcnJvciBwcm9jZXNzaW5nIHJlcXVlc3RcIiwgeyBzdGF0dXM6IDUwMCB9KTtcclxuLy8gICB9XHJcbi8vIH1cclxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIk9wZW5BSVN0cmVhbSIsIlN0cmVhbWluZ1RleHRSZXNwb25zZSIsIkRhdGFBUElDbGllbnQiLCJyZXF1aXJlIiwiZG90ZW52IiwiY29uZmlnIiwiQVNUUkFfREJfTkFNRVNQQUNFIiwiQVNUUkFfREJfQ09MTEVDVElPTiIsIkFTVFJBX0RCX0FQSV9FTkRQT0lOVCIsIkFTVFJBX0RCX0FQUExJQ0FUSU9OX1RPS0VOIiwiT1BFTkFJX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52Iiwib3BlbmFpIiwiYXBpS2V5IiwiY2xpZW50IiwiZGIiLCJuYW1lc3BhY2UiLCJQT1NUIiwicmVxIiwibWVzc2FnZXMiLCJqc29uIiwibGF0ZXN0TWVzc2FnZSIsImxlbmd0aCIsImNvbnRlbnQiLCJkb2NDb250ZXh0IiwiZW1iZWRkaW5nIiwiZW1iZWRkaW5ncyIsImNyZWF0ZSIsIm1vZGVsIiwiaW5wdXQiLCJlbmNvZGluZ19mb3JtYXQiLCJjb2xsZWN0aW9uIiwiY3Vyc29yIiwiZmluZCIsInNvcnQiLCIkdmVjdG9yIiwiZGF0YSIsImxpbWl0IiwiZG9jdW1lbnRzIiwidG9BcnJheSIsImRvY3NNYXAiLCJtYXAiLCJkb2MiLCJ0ZXh0IiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29uc29sZSIsInRlbXBsYXRlIiwicm9sZSIsImxvZyIsInJlc3BvbnNlIiwiY2hhdCIsImNvbXBsZXRpb25zIiwic3RyZWFtIiwiUmVzcG9uc2UiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/ai","vendor-chunks/@ai-sdk","vendor-chunks/zod-to-json-schema","vendor-chunks/formdata-node","vendor-chunks/eventsource-parser","vendor-chunks/secure-json-parse","vendor-chunks/nanoid","vendor-chunks/openai","vendor-chunks/@datastax","vendor-chunks/iconv-lite","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/dotenv","vendor-chunks/web-streams-polyfill","vendor-chunks/uuidv7","vendor-chunks/webidl-conversions","vendor-chunks/safer-buffer","vendor-chunks/safe-stable-stringify","vendor-chunks/node-fetch","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/encoding","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CTutorial_Rag%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CTutorial_Rag&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();